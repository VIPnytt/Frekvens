#pragma once

#include "config/constants.h"
#include "modules/ModeModule.h"

class JaggedWaveformMode : public ModeModule
{
private:
    unsigned long lastMillis = 0;

    const std::vector<std::vector<uint16_t>> jagged = {
        {
            0b0010001000100100,
            0b1101110111011011,
        },
        {
            0b0000001000100100,
            0b0010001001101010,
            0b1101010101011010,
            0b0001010101000001,
            0b0000100010000001,
        },
        {
            0b0010000100000000,
            0b0101001010010000,
            0b1000101010101001,
            0b0000101010100101,
            0b0000010001000111,
        },
        {
            0b0000000100010000,
            0b0111000100010000,
            0b1001001010101000,
            0b1000101010101000,
            0b1000101010101101,
            0b0000101010100101,
            0b0000101010100111,
            0b0000011001000000,
            0b0000010001000000,
        },
        {
            0b0000000000010000,
            0b0000000000011000,
            0b0000000000101100,
            0b0010000000100100,
            0b0101100000100100,
            0b1000010000100100,
            0b1000001000100100,
            0b1000000100100100,
            0b0000000100100100,
            0b0000000101100100,
            0b0000000101000111,
            0b0000000010000010,
        },
        {
            0b0000000000010000,
            0b0110000000011000,
            0b1001000000110100,
            0b1001000000100100,
            0b1001000100100100,
            0b1001001110100100,
            0b1001001010100101,
            0b0001001010100101,
            0b0001001010100101,
            0b0000101001000101,
            0b0000110000000111,
            0b0000010000000010,
        },
    };

public:
    JaggedWaveformMode() : ModeModule("Jagged waveform") {};

    void handle() override;
};
